---
import { Image } from "astro:assets";

const navLinks = [
  {
    name: "About us",
    href: "#about",
  },
  {
    name: "Services",
    href: "#services",
  },
  {
    name: "Use cases",
    href: "#cases",
  },
  {
    name: "Testimonials",
    href: "#testimonials",
  },
  {
    name: "Contact",
    href: "#contact",
  },
];

import bars from "../../assets/bars.svg";
import brand from "../../assets/premium-hosting-horizontal-logo.svg";
---

<div
  class="bg-black fixed w-full top-0 z-10 py-[30px] h-auto flex justify-center px-4"
>
  <nav
    aria-label="Main Navigation"
    role="navigation"
    class="w-full flex h-full items-center justify-between"
  >
    <!-- Brand -->
    <div class="pl-4 xl:flex-none">
      <a href="#home">
        <Image src={brand} alt="Brand Logo" class="w-[219px]" loading="eager" />
      </a>
    </div>



    <!-- Nav Menu -->
    <div
      id="navmenu"
      class="bg-[#D4AF37] w-full absolute top-full z-10 xl:static xl:flex xl:flex-grow xl:items-center xl:justify-center overflow-hidden transition-height duration-500 h-0 xl:h-auto rounded-xl"
      style="max-width: 1280px;"
    >
      <!-- Nav Links -->
      <ul class="xl:flex xl:flex-grow xl:justify-center xl:gap-10">
        {
          navLinks.map((link) => {
            return (
              <li class="mx-4 p-4 xl:mx-0 px-0">
                <a id={link.name} href={link.href} class="block">
                  {link.name}
                </a>
              </li>
            );
          })
        }
      </ul>

      <!-- Login -->
      <div class="flex xl:flex-row xl:items-center p-6 xl:gap-4 flex-col">
        <button class="bg-[#1a0033] text-white px-[35px] py-5 rounded-lg border border-solid border-[#1a0033] transition-all duration-200 hover:bg-[#2a004d] transform hover:scale-105">Request a quote</button>
      </div>
    </div>

    <!-- Header Icons -->
    <div class="flex items-center gap-4 pr-4 xl:pr-0">
      <!-- Account Icon -->
      <button class="text-white hover:text-[#D4AF37] transition-colors p-2" aria-label="Account">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
      </button>

      <!-- Basket/Cart Icon -->
      <button class="text-white hover:text-[#D4AF37] transition-colors p-2 relative" aria-label="Shopping Cart">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5H19M7 13l-1.1 5M7 13l1.1-5m8.9 5L17 18m2-5l1.1-5M9 21a1 1 0 11-2 0 1 1 0 012 0zm8 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
        </svg>
        <!-- Cart badge -->
        <span class="absolute -top-1 -right-1 bg-[#D4AF37] text-[#1a0033] text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">0</span>
      </button>
    </div>

    <!-- Hamburger menu -->
    <button
      aria-label="menu"
      role="button"
      aria-controls="navmenu"
      aria-expanded="false"
      id="menuButton"
      class="w-12 h-12 xl:hidden pr-4 cursor-pointer"
    >
      <Image src={bars} alt="hamburgerIcon" class="hamburgerIcon" />
    </button>
  </nav>
</div>
<script>
  document.addEventListener("DOMContentLoaded", (_) => {
    const menuButton = document.getElementById("menuButton");
    const navMenu = document.getElementById("navmenu");

    let isMenuOpen = false;

    if (menuButton && navMenu) {
      menuButton.addEventListener("click", () => {
        /* Handle the height transition */
        isMenuOpen = !isMenuOpen;

        menuButton.setAttribute("aria-expanded", `${isMenuOpen}`);

        if (isMenuOpen) {
          navMenu.style.height = `${navMenu.scrollHeight}px`;
        } else {
          navMenu.style.height = "0px";
        }
      });

      navMenu.addEventListener("click", () => {
        /* Close menu after using it */
        if (isMenuOpen) {
          isMenuOpen = false;
          navMenu.style.height = "0px";
          navMenu.classList.remove("h-auto");
        }
      });

      window.addEventListener("resize", () => {
        /* Resize cleanup screen state*/
        if (window.innerWidth >= 1280) {
          /* Add height if menu was closed and then resize happened */
          navMenu.style.height = "auto";
          navMenu.classList.remove("h-0");
        } else {
          /* Prevent opened menu when going from bit to small */
          navMenu.style.height = "0px";
        }
      });
    }
  });
</script>

<!-- 
  Use to highlight the active link in the navigation bar
  Gotta test in dev and prod bc sometimes it doesn't work
---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove the first "/"
---

<nav>
  <a class={currentPath === "" ? "active" : ""} href="/">Home</a>
  <a class={currentPath === "portfolio" ? "active" : ""} href="/portfolio">Portfolio</a>
  <a class={currentPath === "posts" ? "active" : ""} href="/posts">Article</a>
  <a class={currentPath === "about" ? "active" : ""} href="/about">About Me</a>
  <a class={currentPath === "contact" ? "active" : ""} href="/contact">Contact Me</a>
</nav>
-->
